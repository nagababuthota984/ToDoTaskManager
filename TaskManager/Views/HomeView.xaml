<UserControl x:Class="TaskManager.Views.HomeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:TaskManager.Views"
             xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
             xmlns:cal ="http://www.caliburnproject.org"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid >
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid Grid.Column="3" HorizontalAlignment="Right">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Rectangle Style="{StaticResource TM.PriorityIndicator.Low}"/>
            <TextBlock Grid.Column="1" Text="Low" VerticalAlignment="Center"/>
            <Rectangle  Grid.Column="2" Style="{StaticResource TM.PriorityIndicator.Medium}"/>
            <TextBlock Grid.Column="3" Text="Medium" VerticalAlignment="Center"/>
            <Rectangle Style="{StaticResource TM.PriorityIndicator.High}" Grid.Column="4" />
            <TextBlock Grid.Column="5" Text="High" VerticalAlignment="Center" Margin="0 0 10 0"/>
        </Grid>
        <TextBlock Grid.Row="1" 
                   Text="Create Task" Style="{StaticResource TM.TextBlock.PrimaryHeading}"
                   Margin="15 0 0 0" Foreground="Black" Background="White"
                   />
        <TextBlock Grid.Row="1"  Grid.Column="1"
                   Text="New" Style="{StaticResource TM.TextBlock.PrimaryHeading}" />
        <TextBlock Grid.Row="1"  Grid.Column="2"
                   Text="In Progress" Style="{StaticResource TM.TextBlock.PrimaryHeading}"/>
        <TextBlock Grid.Row="1"  Grid.Column="3"
                   Text="Completed" Style="{StaticResource TM.TextBlock.PrimaryHeading}"/>
        <Border BorderBrush="Black" BorderThickness="1" Grid.Row="2">
            <Grid Grid.Row="2" Margin="15">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                </Grid.RowDefinitions>
                <TextBlock Text="Name"  />
                <TextBox Grid.Row="1" mah:TextBoxHelper.Watermark="Please enter name" x:Name="Name"/>
                <TextBlock Grid.Row="2" Text="Description" Margin="0 10 0 0"/>
                <TextBox mah:TextBoxHelper.Watermark="Please enter description"
                         x:Name="Description" Grid.Row="3" Height="50"  TextWrapping="Wrap"/>
                <TextBlock Grid.Row="4" Text="Status" Margin="0 8 0 0"/>
                <ComboBox x:Name="StatusOptions" 
                          SelectedItem="{Binding SelectedStatus,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                          Grid.Row="5" />
                <TextBlock Text="Due Date" Grid.Row="6" Margin="0 8 0 0"/>
                <mah:DateTimePicker SelectedDateTime="{Binding DueDate,UpdateSourceTrigger=PropertyChanged}" Grid.Row="7" />
                <TextBlock Text="Priority" Grid.Row="8"  Margin="0 8 0 0"/>
                <WrapPanel Grid.Row="9" >
                    <RadioButton 
                        IsChecked="{Binding SelectedPriority, Converter={StaticResource TM.Converters.PriorityToBooleanConverter},
                        ConverterParameter=0}"
                             Content="Low" Margin="5"/>
                    <RadioButton 
                        IsChecked="{Binding SelectedPriority, Converter={StaticResource TM.Converters.PriorityToBooleanConverter},
                        ConverterParameter=1}"
                             Content="Medium" Margin="5"/>
                    <RadioButton 
                        IsChecked="{Binding SelectedPriority, Converter={StaticResource TM.Converters.PriorityToBooleanConverter},
                        ConverterParameter=2}"
                             Content="High" Margin="5"/>
                </WrapPanel>
                <!--another wrap panel-->
                <Grid Grid.Row="10" Margin="0 15 0 0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="2*"/>
                    </Grid.ColumnDefinitions>
                    <Button Grid.Column="1" x:Name="CreateTask" Content="Create" MinWidth="40"  
                            Background="#16A05D" Foreground="White" Margin="0 0 5 0">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Grid Background="{TemplateBinding Background}">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Grid>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Cursor" Value="Hand"/>
                            </Style>
                        </Button.Style>
                    </Button>
                    <Button Grid.Column="2" x:Name="Cancel" Content="Cancel" />
                </Grid>
            </Grid>
        </Border>
        <Border BorderBrush="Black" Grid.Column="1" Grid.Row="2" BorderThickness="0 1 1 1" >
            <ListBox AllowDrop="True" x:Name="NewList" DataContext="{Binding}" Background="#F6F5F9"
                     ItemsSource="{Binding NewTasks}"
                     ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                     cal:Message.Attach="[Event MouseMove] = [Action MouseMoveHandler($eventArgs)];
                     [Event Drop] = [Action DropOnNewTasks($eventArgs)];
                     [Event SelectionChanged]=[Action ShowSelectedTask()]"
                     Grid.Row="2" Grid.Column="1"
                     SelectedItem="{Binding SelectedTask}"
                     ItemTemplate="{StaticResource TM.ListBox.TaskItemTemplate}"
                     ItemContainerStyle="{StaticResource TM.ListBox.ListBoxItemStyle}"/>
        </Border>

        <Border BorderBrush="Black" Grid.Row="2" Grid.Column="2" BorderThickness="0 1 1 1">
            <ListBox x:Name="InProgressList" AllowDrop="True" DataContext="{Binding}" Background="#F6F5F9"
                     ItemsSource="{Binding InProgressTasks}" 
                     ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                     cal:Message.Attach="[Event MouseMove] = [Action MouseMoveHandler($eventArgs)];
                     [Event Drop] = [Action DropOnInProgressTasks($eventArgs)];
                     [Event SelectionChanged]=[Action ShowSelectedTask()]"
                     SelectedItem="{Binding SelectedTask}"
                     Grid.Row="2" Grid.Column="2"
                     ItemTemplate="{StaticResource TM.ListBox.TaskItemTemplate}"
                     ItemContainerStyle="{StaticResource TM.ListBox.ListBoxItemStyle}">
            </ListBox>
        </Border>


        <Border BorderBrush="Black" Grid.Row="2" Grid.Column="3" BorderThickness="0 1 1 1">
            <ListBox x:Name="CompletedList" AllowDrop="True" DataContext="{Binding}" Background="#F6F5F9"
                     cal:Message.Attach="[Event MouseMove] = [Action MouseMoveHandler($eventArgs)];
                     [Event Drop] = [Action DropOnCompletedTasks($eventArgs)];
                     [Event SelectionChanged]=[Action ShowSelectedTask()]"
                     ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                     SelectedItem="{Binding SelectedTask}"
                     ItemsSource="{Binding CompletedTasks}" Grid.Row="2" Grid.Column="3"
                     ItemTemplate="{StaticResource TM.ListBox.TaskItemTemplate}"
                     ItemContainerStyle="{StaticResource TM.ListBox.ListBoxItemStyle}"/>
        </Border>

    </Grid>

</UserControl>
